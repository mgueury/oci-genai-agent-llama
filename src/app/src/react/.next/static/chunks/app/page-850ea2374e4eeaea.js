(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{313:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eR});var a=r(5155),n=r(3267),i=r(4426),o=r(5695),l=r(2115),s=r(2129),c=r(9839),d=r(8309);function u(e){let{children:t,projectConfig:r=null}=e,n=(0,l.useMemo)(()=>(0,c.A)({palette:{mode:"light",primary:{main:(null==r?void 0:r.mainColor)||s.v.defaults.color,light:(null==r?void 0:r.mainColor)||s.v.defaults.color,dark:(null==r?void 0:r.mainColor)||s.v.defaults.color,contrastText:"#FFFFFF"},secondary:{main:"#3FB37F",light:"#52C08D",dark:"#36A071",contrastText:"#EDEBE6"},background:{default:"#F5F5F5",paper:"#FFFFFF"}},shape:{borderRadius:14}}),[r]);return(0,a.jsx)(d.default,{theme:n,children:t})}var p=r(4391),x=r(1116),g=r(9932),h=r(8407),m=r(5726),f=r(2302),b=r(5561),j=r(760);let y=()=>{let e=null;return{sendMessage:async t=>{let r={question:t,execute_functions:!0};e&&(r.session_id=e);let a=await fetch("".concat("http://localhost:8000","/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});if(!a.ok)throw Error("API Error: ".concat(a.status));let n=await a.json();return n.session_id&&(e=n.session_id),n}}},v=()=>{let e=null,t=null,r=null,a=!1;return{isSupported:()=>!!(navigator.mediaDevices&&window.MediaRecorder&&window.WebSocket),startRecording:async(n,i)=>{try{return(e=new WebSocket("ws://localhost:3001/ws/speech")).onopen=()=>{},e.onmessage=e=>{let t=JSON.parse(e.data);t.type,"transcription"===t.type?n({transcript:t.text,isFinal:t.isFinal}):"error"===t.type&&(console.error("[Cliente] Oracle WS error:",t.message),i(t.message))},e.onerror=e=>{console.error("[Cliente][oracleSpeechService] \uD83D\uDD34 WS error:",e),i("WebSocket error")},e.onclose=e=>{},await new Promise(t=>{e.onopen=t}),r=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1}}),(t=new MediaRecorder(r)).ondataavailable=t=>{t.data.size>0&&e.readyState===WebSocket.OPEN&&t.data.arrayBuffer().then(t=>{e.send(t)})},t.onstart=()=>t.onstop=()=>t.onerror=e=>console.error("[Cliente] Recorder error:",e),t.start(500),a=!0,!0}catch(e){return console.error("[Cliente] startRecording error:",e),i(e.message),!1}},stopRecording:()=>(t&&t.stop(),r&&r.getTracks().forEach(e=>e.stop()),e&&e.close(),a=!1,!0),isRecording:()=>a}},w=()=>{let e=null,t=()=>"SpeechRecognition"in window||"webkitSpeechRecognition"in window;return{isSupported:t,startListening:(r,a)=>{if(!t())return a("Speech recognition is not supported in your browser"),!1;try{return(e=new(window.SpeechRecognition||window.webkitSpeechRecognition)).lang="en-US",e.interimResults=!0,e.continuous=!1,e.onresult=e=>{let t=Array.from(e.results).map(e=>e[0]).map(e=>e.transcript).join("");r({transcript:t,isFinal:e.results[e.results.length-1].isFinal})},e.onend=()=>{r({stopped:!0})},e.onerror=e=>{console.error("Speech recognition error",e),a(e.error)},e.start(),!0}catch(e){return console.error("Error starting speech recognition:",e),a(e.message),!1}},stopListening:()=>!!e&&(e.stop(),e=null,!0)}},A=(e,t)=>({userId:t,messagePayload:{type:"text",text:e.trim()},date:new Date().toISOString(),from:null});var k=r(3525);let C=(0,l.createContext)(null),S=()=>{let e=(0,l.useContext)(C);if(!e)throw Error("useChat must be used within a ChatProvider");return e},P=e=>"oracle"===e?v():w(),I=e=>{let{children:t}=e,{getCurrentProject:r}=(0,k.B)(),[n,i]=(0,l.useState)([]),[o,s]=(0,l.useState)(!0),[c,d]=(0,l.useState)(!1),[u,p]=(0,l.useState)(""),[x,g]=(0,l.useState)(""),[h,m]=(0,l.useState)(!1),[f,b]=(0,l.useState)(!1),[j,v]=(0,l.useState)(null),[w,S]=(0,l.useState)(null),[I,R]=(0,l.useState)("browser"),[F,W]=(0,l.useState)(null);(0,l.useEffect)(()=>{let e=window.localStorage.getItem("chatUserId")||"user".concat(Math.random().toString(36).substring(2,10));g(e),window.localStorage.setItem("chatUserId",e)},[]),(0,l.useEffect)(()=>{let e=r().speechProvider||"browser";I!==e&&(S(P(e)),R(e),i([]),b(!1))},[r,I]),(0,l.useEffect)(()=>{x&&v(y())},[x]);let D=(0,l.useCallback)(async e=>{if(!e.trim()||!j)return!1;let t=A(e,x);i(e=>[...e,t]),b(!0),p("");try{let t=await j.sendMessage(e),r={userId:"bot",messagePayload:E(t),date:new Date().toISOString(),from:{type:"bot"}};return i(e=>[...e,r]),b(!1),!0}catch(e){return p("Error: ".concat(e.message)),b(!1),!1}},[j,x]),E=e=>{let{answer:t,diagram_base64:r,citations:a}=e;if(r)return{type:"diagram",text:t,diagram_base64:r};try{let e=JSON.parse(t);if(e.executionResult)return{type:"sql_result",generatedQuery:e.generatedQuery||"",executionResult:e.executionResult||[],text:"Query executed: ".concat(e.generatedQuery||"SQL query")}}catch(e){}return{type:"text",text:t,citations:a||[]}},U=(0,l.useCallback)(async e=>{if(!e||!j)return!1;try{let t={userId:x,messagePayload:{type:"attachment",attachment:{type:e.type,title:e.name,url:URL.createObjectURL(e)}},date:new Date().toISOString(),from:null};return i(e=>[...e,t]),!0}catch(e){return p("Failed to send attachment: ".concat(e.message)),!1}},[j,x]),z=(0,l.useCallback)(()=>{i([]),b(!1)},[]),O=(0,l.useCallback)(()=>{if(!w||!w.isSupported())return void p("Speech recognition is not supported");if(h){w.stopListening?w.stopListening():w.stopRecording&&w.stopRecording(),m(!1);return}let e=!1;e="oracle"===I?w.startRecording(e=>{e.isFinal&&e.transcript&&D(e.transcript)},e=>{m(!1),p("Speech recognition error: ".concat(e))}):w.startListening(e=>{if(e.stopped)return void m(!1);(e.isFinal||e.stopped)&&(m(!1),e.transcript&&D(e.transcript))},e=>{m(!1),p("Speech recognition error: ".concat(e))}),m(e)},[h,D,w,I]);return(0,l.useEffect)(()=>{w||S(P("browser"))},[w]),(0,a.jsx)(C.Provider,{value:{messages:n,connected:o,loading:c,error:u,isListening:h,isWaitingForResponse:f,userId:x,sendMessage:D,sendAttachment:U,clearChat:z,toggleSpeechRecognition:O,setError:p,currentSpeechProvider:I,speakMessage:()=>!1,cancelAudio:()=>W(null),playingMessageId:F,setPlayingMessageId:W},children:t})};var R=r(7059),F=r(7068),W=r(5297),D=r(3127);function E(e){let{messagesCount:t,onNewChat:r,isConnected:i=!1,projectName:l}=e;return(0,o.useRouter)(),(0,a.jsxs)(n.A,{sx:{display:"flex",alignItems:"center"},children:[(0,a.jsxs)(n.A,{sx:{display:"flex",alignItems:"center",flexGrow:1,ml:1.5},children:[(0,a.jsx)(n.A,{sx:{width:10,height:10,borderRadius:"50%",backgroundColor:i?"#4CAF50":"#9e9e9e",marginRight:1}}),(0,a.jsx)(j.N,{mode:"wait",children:t>0&&(0,a.jsx)(b.P.div,{variants:{initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1,transition:{type:"spring",stiffness:400,damping:25,duration:.4}},exit:{opacity:0,y:-10,scale:.95,transition:{duration:.2}}},initial:"initial",animate:"animate",exit:"exit",children:(0,a.jsx)(x.A,{variant:"body2",component:"div",children:l})},"project-title")})]}),(0,a.jsx)(F.A,{direction:"row",alignItems:"center",spacing:1,children:(0,a.jsx)(W.A,{title:"New chat",placement:"top",children:(0,a.jsx)(D.A,{onClick:r,disabled:0===t,sx:{mr:1},size:"small",children:(0,a.jsx)(R.A,{})})})})]})}var U=r(5432),z=r(6324),O=r(4416),N=r(7434),T=r(9588),L=r(5);function _(e){let{onSendMessage:t,onToggleSpeechRecognition:r,onSendAttachment:i,isConnected:o,isListening:s,isPreview:c,currentSpeechProvider:d}=e,[u,g]=(0,l.useState)(""),[h,m]=(0,l.useState)([0,0,0,0,0]),f=(0,l.useRef)(null),j=(0,l.useRef)(null),y=(0,l.useRef)(null),v=(0,l.useRef)(null),[w,A]=(0,l.useState)(null),[k,C]=(0,l.useState)(null),S=(0,l.useRef)(null),P=(0,z.default)(),I=async()=>{if(!o)return;let e=u.trim();if(e||w){if(w&&i&&!await i(w))return;e&&t&&t(u.trim()),g(""),A(null),C(null)}},R="oracle"===d&&s;return(0,l.useEffect)(()=>(R?(async()=>{try{let e=await navigator.mediaDevices.getUserMedia({audio:{sampleRate:16e3,channelCount:1}});j.current=new AudioContext,y.current=j.current.createAnalyser(),j.current.createMediaStreamSource(e).connect(y.current),y.current.fftSize=256;let t=y.current.frequencyBinCount,r=new Uint8Array(t),a=()=>{y.current.getByteFrequencyData(r);let e=[],n=Math.floor(t/5);for(let t=0;t<5;t++){let a=t*n,i=a+n,o=0;for(let e=a;e<i;e++)o+=r[e];let l=o/n,s=Math.min(l/80,3);e.push(s)}m(e),v.current=requestAnimationFrame(a)};a()}catch(e){console.error("Error accessing microphone:",e)}})():(v.current&&cancelAnimationFrame(v.current),j.current&&"closed"!==j.current.state&&(j.current.close(),j.current=null),m([0,0,0,0,0])),()=>{v.current&&cancelAnimationFrame(v.current),j.current&&"closed"!==j.current.state&&j.current.close()}),[R]),(0,l.useEffect)(()=>{o&&f.current&&f.current.focus()},[o]),(0,l.useEffect)(()=>{let e=e=>{let t=e.detail;if(A(t),t.type.startsWith("image/")){let e=new FileReader;e.onload=e=>C(e.target.result),e.readAsDataURL(t)}else C(null)};return window.addEventListener("fileDropped",e),()=>window.removeEventListener("fileDropped",e)},[]),(0,a.jsxs)(n.A,{sx:{display:"flex",justifyContent:"center",width:"100%",position:"relative"},children:[w&&(0,a.jsxs)(n.A,{sx:{position:"absolute",bottom:"calc(100% + 8px)",left:0,backgroundColor:(0,p.X4)("#000",.6),backdropFilter:"blur(5px)",borderRadius:1,padding:1,boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid rgba(255, 255, 255, 0.1)",display:"flex",flexDirection:"column",alignItems:"center",gap:.5,zIndex:10,width:80},children:[(0,a.jsx)(D.A,{size:"small",onClick:()=>{A(null),C(null)},sx:{position:"absolute",top:-6,right:-6,color:"white",backgroundColor:"#404040",width:16,height:16,"&:hover":{backgroundColor:"#555"}},children:(0,a.jsx)(O.A,{size:8})}),k?(0,a.jsx)(n.A,{component:"img",src:k,sx:{width:"100%",height:50,borderRadius:.5,objectFit:"contain"}}):(0,a.jsx)(n.A,{sx:{width:"100%",height:50,borderRadius:.5,backgroundColor:"#404040",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,a.jsx)(N.A,{size:20,color:"white"})}),(0,a.jsx)(x.A,{variant:"caption",sx:{fontWeight:500,color:"white",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",maxWidth:70,textAlign:"center",fontSize:"0.65rem"},children:w.name})]}),(0,a.jsxs)(b.P.div,{layout:!0,style:{borderRadius:24,backgroundColor:"white",boxShadow:"0 8px 24px -8px rgba(0, 0, 0, 0.15)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",padding:4,display:"flex",alignItems:"center",width:R?"auto":"100%",maxWidth:"md",minHeight:47},transition:{type:"spring",stiffness:300,damping:25},children:[!R&&(0,a.jsx)(U.A,{size:"small",fullWidth:!0,variant:"standard",placeholder:"Start with a message...",value:u,onChange:e=>g(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),I())},disabled:!o||s,multiline:!0,maxRows:4,inputRef:f,slotProps:{input:{disableUnderline:!0,sx:{color:P.palette.text.primary,"::placeholder":{color:P.palette.text.secondary}}}},sx:{pl:2,pr:2,py:.5}}),(0,a.jsxs)(F.A,{direction:"row",spacing:1,alignItems:"center",children:[(0,a.jsx)(D.A,{onClick:r,disabled:!o,title:s?"Stop recording":"Start voice recording",sx:{color:s?"white":P.palette.text.secondary,backgroundColor:s?P.palette.error.main:"transparent","&:hover":{backgroundColor:s?P.palette.error.dark:P.palette.primary.main+"14"},"&:disabled":{color:P.palette.text.disabled}},children:R?(0,a.jsx)(n.A,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:"1px",width:18,height:18,overflow:"hidden"},children:[2,1,0,1,2].map((e,t)=>(0,a.jsx)(b.P.div,{style:{width:2,backgroundColor:"white",borderRadius:1,height:4+10*h[e]},animate:{height:4+10*h[e]},transition:{duration:.1,ease:"easeOut"}},t))}):(0,a.jsx)(T.A,{size:18})}),!R&&(0,a.jsx)(D.A,{onClick:I,disabled:!c&&(!o||!u.trim()&&!w),title:"Send message",sx:{backgroundColor:P.palette.primary.main,color:P.palette.primary.contrastText,"&:hover":{backgroundColor:P.palette.primary.dark},"&:disabled":{backgroundColor:P.palette.action.disabled,color:P.palette.action.disabledBackground}},children:(0,a.jsx)(L.A,{size:16,style:{paddingBottom:2.5,paddingLeft:2}})})]}),(0,a.jsx)("input",{ref:S,type:"file",accept:"image/*,.pdf",style:{display:"none"},onChange:e=>{let t=e.target.files[0];if(t){if(A(t),t.type.startsWith("image/")){let e=new FileReader;e.onload=e=>C(e.target.result),e.readAsDataURL(t)}else C(null);e.target.value=""}}})]})]})}var M=r(6591),B=r(6278),H=r(4492),G=r(9927),q=r(1977),Q=r(8534),J=r(4296),X=r(7976),V=r(6033),K=r(404),Y=r(4263),$=r(9776),Z=r(1218),ee=r(6632),et=r(2657),er=r(3786),ea=r(1573);function en(e){let{message:t,isFromBot:r}=e,i=t.messagePayload,[o,s]=(0,l.useState)(!1),[c,d]=(0,l.useState)(""),u=e=>(null!=e?String(e):"").length>100;switch(i.type){case"text":return(0,a.jsxs)(n.A,{children:[(0,a.jsx)(n.A,{className:"markdown-content",sx:{fontSize:"0.88rem",letterSpacing:"0.01px",lineHeight:1.5,...r&&{fontFamily:"var(--font-exo2), sans-serif !important","& *":{fontFamily:"var(--font-exo2), sans-serif !important"},"& span":{fontFamily:"var(--font-exo2), sans-serif !important"}}},children:(0,a.jsx)(ea.Ay,{children:i.text})}),i.citations&&i.citations.length>0&&(0,a.jsxs)(n.A,{sx:{mt:2,pt:2,borderTop:"1px solid #e0e0e0"},children:[(0,a.jsx)(x.A,{variant:"caption",sx:{fontWeight:600,color:"text.secondary"},children:"Sources:"}),i.citations.map((e,t)=>(0,a.jsxs)(n.A,{sx:{mt:1,display:"flex",alignItems:"center",gap:1,py:.5},children:[(0,a.jsx)(N.A,{size:14,style:{color:"#666",flexShrink:0}}),(0,a.jsx)(W.A,{title:e.document_name,arrow:!0,children:(0,a.jsx)(x.A,{variant:"caption",sx:{flexGrow:1,maxWidth:"350px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"text.primary"},children:e.document_name})}),e.page_numbers&&e.page_numbers.length>0&&(0,a.jsxs)(x.A,{variant:"caption",sx:{color:"#999",fontSize:"0.7rem"},children:["pages ",e.page_numbers.join(", ")]}),(0,a.jsxs)(n.A,{sx:{display:"flex",gap:.5,ml:"auto"},children:[(0,a.jsx)(W.A,{title:"View content",arrow:!0,children:(0,a.jsx)(D.A,{size:"small",sx:{width:24,height:24},onClick:()=>{d(e.content),s(!0)},children:(0,a.jsx)(et.A,{size:16})})}),(0,a.jsx)(W.A,{title:"Open document",arrow:!0,children:(0,a.jsx)(D.A,{size:"small",sx:{width:24,height:24},onClick:()=>window.open(e.source_url,"_blank"),children:(0,a.jsx)(er.A,{size:16})})})]})]},t)),(0,a.jsxs)(B.A,{open:o,onClose:()=>s(!1),maxWidth:"md",fullWidth:!0,children:[(0,a.jsx)(H.A,{children:"Citation Content"}),(0,a.jsx)(G.A,{children:(0,a.jsx)(x.A,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:c})}),(0,a.jsx)(q.A,{children:(0,a.jsx)(Q.A,{onClick:()=>s(!1),children:"Close"})})]})]})]});case"diagram":return(0,a.jsxs)(n.A,{children:[i.text&&i.text.trim()&&(0,a.jsx)(n.A,{sx:{mb:2},children:(0,a.jsx)(ea.Ay,{children:i.text})}),(0,a.jsx)(n.A,{component:"img",src:"data:image/png;base64,".concat(i.diagram_base64),alt:"Generated diagram",sx:{maxWidth:"100%",height:"auto",borderRadius:1,boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1)"}})]});case"sql_result":return(0,a.jsxs)(n.A,{children:[i.generatedQuery&&(0,a.jsxs)(n.A,{sx:{mb:2},children:[(0,a.jsx)(x.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Generated Query:"}),(0,a.jsx)(n.A,{component:"pre",sx:{backgroundColor:"#f5f5f5",padding:1.5,borderRadius:1,fontSize:"0.8rem",overflow:"auto",fontFamily:"monospace"},children:i.generatedQuery})]}),i.executionResult&&i.executionResult.length>0&&(()=>{let e=i.executionResult,t=Object.keys(e[0]),r=(t,r)=>{let a,n=[t,...e.map(e=>Object.values(e)[r])].map(e=>String(e||"").length),i=n.reduce((e,t)=>e+t,0)/n.length,o=Math.max(...n),l=Math.max(8*t.length,100),s=Math.max(parseInt((a=o>200?{minWidth:"280px",maxWidth:"350px"}:o>100?{minWidth:"200px",maxWidth:"280px"}:i>30?{minWidth:"150px",maxWidth:"200px"}:i>15?{minWidth:"120px",maxWidth:"150px"}:{minWidth:"100px",maxWidth:"120px"}).minWidth),l);return{minWidth:"".concat(s,"px"),maxWidth:a.maxWidth}};return(0,a.jsxs)(n.A,{children:[(0,a.jsx)(x.A,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Results:"}),(0,a.jsx)(J.A,{component:h.A,variant:"outlined",sx:{maxHeight:400},children:(0,a.jsxs)(X.A,{size:"small",stickyHeader:!0,sx:{tableLayout:"fixed"},children:[(0,a.jsx)(V.A,{children:(0,a.jsx)(K.A,{children:t.map((e,t)=>{let n=r(e,t);return(0,a.jsx)(Y.A,{sx:{fontWeight:600,verticalAlign:"top",...n,width:n.minWidth},children:e},e)})})}),(0,a.jsx)($.A,{children:e.map((e,i)=>(0,a.jsx)(K.A,{children:Object.values(e).map((e,i)=>{let o=null!=e?String(e):"",l=u(e),s=r(t[i],i);return(0,a.jsx)(Y.A,{sx:{verticalAlign:"top",padding:"8px 16px",...s},children:l?(0,a.jsx)(n.A,{sx:{maxHeight:"120px",overflowY:"auto",overflowX:"hidden",wordBreak:"break-word",whiteSpace:"pre-wrap",fontSize:"0.875rem",lineHeight:1.4,"&::-webkit-scrollbar":{width:"6px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1",borderRadius:"3px"},"&::-webkit-scrollbar-thumb":{background:"#c1c1c1",borderRadius:"3px","&:hover":{background:"#a8a8a8"}}},children:o}):(0,a.jsx)(n.A,{sx:{wordBreak:"break-word",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontSize:"0.875rem",lineHeight:1.4,...o.length>50&&{whiteSpace:"pre-wrap",overflow:"visible",textOverflow:"clip"}},title:o,children:o})},i)})},i))})]})})]})})()]});case"card":return(0,a.jsx)(Z.A,{variant:"outlined",children:(0,a.jsx)(ee.A,{children:i.cards&&i.cards.map((e,t)=>(0,a.jsxs)(n.A,{children:[e.title&&(0,a.jsx)(x.A,{variant:"h6",children:e.title}),e.description&&(0,a.jsx)(x.A,{variant:"body2",children:e.description}),e.url&&(0,a.jsx)(x.A,{variant:"body2",children:(0,a.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.url})})]},t))})});case"attachment":let p=i.attachment;if(p.type.startsWith("image/"))return(0,a.jsx)(n.A,{component:"img",src:p.url,alt:p.title||"Uploaded image",sx:{maxWidth:200,maxHeight:300,borderRadius:.5,objectFit:"contain"}});return(0,a.jsxs)(x.A,{children:["Attachment: ",p.type," -"," ",(0,a.jsx)("a",{href:p.url,target:"_blank",rel:"noopener noreferrer",children:p.title||"View"})]});default:return(0,a.jsxs)(x.A,{color:"error",children:["Unsupported message type: ",i.type]})}}function ei(e){let{message:t}=e,r=(0,z.default)(),{speakMessage:i,cancelAudio:o,playingMessageId:l,setPlayingMessageId:s}=S(),c=t.from,d=r.palette.primary.main;r.palette.primary.light,r.palette.primary.dark;let u=l==="".concat(t.userId,"-").concat(t.date);return(0,a.jsx)(n.A,{sx:{display:"flex",justifyContent:c?"flex-start":"flex-end",width:"100%",padding:"4px 16px"},children:c?(0,a.jsx)(b.P.div,{variants:{initial:{opacity:0,x:-30,scale:.96},animate:{opacity:1,x:0,scale:1,transition:{type:"spring",stiffness:300,damping:30,duration:.5}}},initial:"initial",animate:"animate",style:{display:"flex",flexDirection:"column",maxWidth:"90%",width:"auto",padding:"12px 0"},children:(0,a.jsx)(n.A,{component:b.P.div,animate:{boxShadow:u?["inset 0 0 0px 0px transparent","inset 0 0 15px 2px ".concat(r.palette.primary.main,"25"),"inset 0 0 25px 3px ".concat(r.palette.primary.main,"40"),"inset 0 0 15px 2px ".concat(r.palette.primary.main,"25")]:"inset 0 0 0px 0px transparent"},transition:{duration:u?2:.5,repeat:u?1/0:0,ease:"easeInOut"},sx:{backgroundColor:"rgba(246, 246, 246, 0.95)",borderRadius:"22px",padding:"12px 16px",WebkitBackdropFilter:"blur(20px)"},children:(0,a.jsx)(en,{message:t,isFromBot:!0})})}):(0,a.jsx)(b.P.div,{variants:{initial:{opacity:0,x:30,scale:.96},animate:{opacity:1,x:0,scale:1,transition:{type:"spring",stiffness:320,damping:25,duration:.4}}},initial:"initial",animate:"animate",style:{display:"flex",flexDirection:"row",alignItems:"flex-start",maxWidth:"90%",width:"auto",..."attachment"===t.messagePayload.type?{background:"transparent",padding:0,borderRadius:0}:{borderRadius:"22px 22px 5px 22px",backgroundColor:d,color:r.palette.primary.contrastText,padding:"6px 16px 6px 16px",backdropFilter:"blur(20px)",WebkitBackdropFilter:"blur(20px)"}},children:(0,a.jsx)(n.A,{sx:{flexGrow:1,pt:"2px"},children:(0,a.jsx)(en,{message:t})})})})}function eo(){let e={animate:{scale:[1,1.2,1],opacity:[.4,1,.4],transition:{duration:1.4,repeat:1/0,ease:"easeInOut"}}};return(0,a.jsx)(n.A,{component:"li",sx:{display:"flex",justifyContent:"flex-start",width:"100%",padding:"4px 16px",listStyle:"none"},children:(0,a.jsx)(n.A,{sx:{display:"flex",flexDirection:"column",maxWidth:"80%",width:"auto",padding:"8px 12px",borderRadius:"20px",backgroundColor:"rgba(0, 0, 0, 0.05)",alignItems:"flex-start"},children:(0,a.jsx)(b.P.div,{variants:{animate:{transition:{staggerChildren:.2,repeat:1/0}}},animate:"animate",style:{display:"flex",alignItems:"center",gap:"3px",padding:4,color:"rgba(0, 0, 0, 0.6)"},children:[0,1,2].map(t=>(0,a.jsx)(b.P.div,{variants:e,style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"currentColor",opacity:.4}},t))})})})}let el=["Get ticket 12","List common cyber attacks","Find open tickets with 'error' in description","Draw diagram for ticket 8"];function es(e){let{projectName:t,logoUrl:r,onSendMessage:i}=e,o=(0,z.default)(),l=e=>{i&&i(e)};return(0,a.jsxs)(n.A,{sx:{position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",p:2,mb:8},children:[(0,a.jsx)(n.A,{component:"img",src:r||"/oracle-logo.png",alt:"".concat(t," logo"),sx:{height:70,maxWidth:270,objectFit:"contain",mb:3}}),(0,a.jsx)(x.A,{variant:"h5",gutterBottom:!0,align:"center",children:t}),(0,a.jsx)(x.A,{variant:"body2",color:"text.secondary",align:"center",sx:{mb:4},children:"How can I help you today?"}),(0,a.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1.5,width:"100%",maxWidth:500,justifyContent:"center"},children:el.map((e,t)=>(0,a.jsx)(Q.A,{variant:"contained",onClick:()=>l(e),sx:{py:1,px:2,borderRadius:2,textTransform:"none",fontSize:"0.825rem",fontWeight:400,flex:"1 1 calc(50% - 6px)",minWidth:"200px",backgroundColor:(0,p.a)(o.palette.primary.main,.9),color:(0,p.e$)(o.palette.primary.main,.1),border:"none",boxShadow:"none","&:hover":{backgroundColor:(0,p.X4)(o.palette.primary.main,.2),color:o.palette.primary.dark,boxShadow:"none"},"&:disabled":{backgroundColor:(0,p.X4)(o.palette.action.disabled,.1),color:o.palette.action.disabled}},children:e},t))})]})}function ec(e){let{messages:t,loading:r,projectName:o,logoUrl:s,onSendMessage:c,isWaitingForResponse:d=!1}=e,u=(0,l.useRef)(null);(0,l.useEffect)(()=>{p()},[t,d]);let p=()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})};if(r&&0===t.length)return(0,a.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",m:4},children:(0,a.jsx)(i.A,{})});let x=t.length>0||d;return(0,a.jsxs)(n.A,{sx:{position:"relative",width:"100%",height:"100%",px:1.5},children:[(0,a.jsx)(j.N,{mode:"wait",children:!x&&(0,a.jsx)(b.P.div,{variants:{initial:{opacity:1,scale:1},exit:{opacity:0,scale:.95,transition:{duration:.3,ease:"easeInOut"}}},initial:"initial",exit:"exit",style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",paddingLeft:"24px",paddingRight:"24px"},children:(0,a.jsx)(es,{projectName:o,logoUrl:s,onSendMessage:c})},"welcome-screen")}),(0,a.jsxs)(M.A,{sx:{width:"100%",p:0,pb:8},children:[t.map((e,t)=>(0,a.jsx)(ei,{message:e},t)),d&&(0,a.jsx)(eo,{}),(0,a.jsx)("div",{ref:u})]})]})}let ed={initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",stiffness:260,damping:20}}},eu={initial:{y:100,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring",stiffness:350,damping:25,delay:.3}}},ep={initial:{opacity:0},animate:{opacity:1,transition:{duration:.3}},exit:{opacity:0,transition:{duration:.2}}};function ex(e){let{onAddProject:t,onEditProject:r,onDeleteProject:i}=e,{messages:o,connected:c,loading:d,error:y,isListening:v,isWaitingForResponse:w,sendMessage:A,sendAttachment:C,clearChat:P,toggleSpeechRecognition:I,setError:R,currentSpeechProvider:F}=S(),{getCurrentProject:W}=(0,k.B)(),D=W(),[U,z]=(0,l.useState)(!1),O=o.length>0||w;return(0,a.jsx)(u,{projectConfig:D,children:(0,a.jsxs)(n.A,{onDragOver:e=>{e.preventDefault(),e.stopPropagation()},onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),z(!0)},onDragLeave:e=>{e.preventDefault(),e.stopPropagation(),e.currentTarget.contains(e.relatedTarget)||z(!1)},onDrop:e=>{e.preventDefault(),e.stopPropagation(),z(!1);let t=e.dataTransfer.files;if(t.length>0){let e=t[0];(e.type.startsWith("image/")||"application/pdf"===e.type)&&window.dispatchEvent(new CustomEvent("fileDropped",{detail:e}))}},sx:{minHeight:"100vh",transition:"all 0.5s ease",position:"relative",...D.backgroundImage?{backgroundImage:"url(".concat(D.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:(0,p.a)(D.backgroundColor||s.v.defaults.backgroundColor,.5)}},children:[U&&(0,a.jsx)(n.A,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:(0,p.X4)(D.mainColor||"#007AFF",.1),display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,pointerEvents:"none",backdropFilter:"blur(1px)"},children:(0,a.jsx)(x.A,{variant:"h4",sx:{color:D.mainColor||"#007AFF",fontWeight:600,textAlign:"center"},children:"\uD83D\uDCCE Drop images or PDFs here"})}),(0,a.jsxs)(g.A,{maxWidth:"lg",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100vh",padding:{xs:2,sm:10},gap:{xs:1,sm:2}},children:[(0,a.jsxs)(h.A,{component:b.P.div,elevation:0,maxWidth:"md",variants:ed,initial:"initial",animate:"animate",sx:{height:"100%",px:1,pt:1,display:"flex",flexDirection:"column",position:"relative",overflow:"hidden",width:"100%",borderRadius:2},children:[(0,a.jsx)(E,{messagesCount:o.length,onNewChat:P,isConnected:c,projectName:D.name}),(0,a.jsx)(n.A,{sx:{flexGrow:1,overflow:"auto",display:"flex",flexDirection:"column",mt:2},children:(0,a.jsx)(ec,{messages:o,loading:d,projectName:D.name,logoUrl:D.logoUrl,onSendMessage:A,isWaitingForResponse:w})}),(0,a.jsx)(j.N,{children:O&&(0,a.jsx)(b.P.div,{variants:ep,initial:"initial",animate:"animate",exit:"exit",style:{position:"absolute",bottom:0,left:0,right:0,zIndex:10},children:(0,a.jsx)(n.A,{sx:{position:"relative",display:"flex",alignItems:"flex-end",justifyContent:"flex-start",background:"linear-gradient(to top, rgba(255,255,255,1) 40%, rgba(255,255,255,0.8) 80%, rgba(255,255,255,0) 100%)",height:"80px",width:"100%"},children:(0,a.jsx)(n.A,{component:"img",src:D.logoUrl||"/oracle-logo.png",alt:"".concat(D.name," logo"),sx:{maxHeight:32,maxWidth:120,mb:2,ml:2,objectFit:"contain"}})})},"floating-logo")}),(0,a.jsx)(m.A,{open:!!y,autoHideDuration:6e3,onClose:()=>R(""),anchorOrigin:{vertical:"bottom",horizontal:"center"},children:(0,a.jsx)(f.A,{onClose:()=>R(""),severity:"error",children:y})})]}),(0,a.jsx)(b.P.div,{variants:eu,initial:"initial",animate:"animate",style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,a.jsx)(_,{onSendMessage:A,onToggleSpeechRecognition:I,onSendAttachment:C,isConnected:c,isListening:v,currentSpeechProvider:F})})]})]})})}var eg=r(9242),eh=r(9505),em=r(1935),ef=r(9427),eb=r(4472),ej=r(5653),ey=r(4915),ev=r(7192),ew=r(6871);let eA={initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1,transition:{type:"spring",stiffness:260,damping:20}}},ek={initial:{y:100,opacity:0},animate:{y:0,opacity:1,transition:{type:"spring",stiffness:350,damping:25,delay:.3}}};function eC(e){let{projectData:t}=e,[r,i]=(0,l.useState)(""),o=[];return(0,a.jsx)(u,{projectConfig:t,children:(0,a.jsx)(n.A,{sx:{height:"100%",width:"100%",borderRadius:2,overflow:"hidden",transition:"all 0.1s ease",justifyContent:"center",alignItems:"center",display:"flex",...t.backgroundImage?{backgroundImage:"url(".concat(t.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:(0,p.a)(t.backgroundColor||"#F5F5F5",.5)}},children:(0,a.jsxs)(n.A,{maxWidth:"md",sx:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%",width:"100%",minWidth:500,padding:8,gap:{xs:1,sm:2}},children:[(0,a.jsxs)(h.A,{component:b.P.div,maxWidth:"md",variants:eA,initial:"initial",animate:"animate",sx:{height:"100%",px:1,pt:1,display:"flex",flexDirection:"column",boxShadow:"0px 0px 15px rgba(0, 0, 0, 0.1)",position:"relative",overflow:"hidden",width:"100%",borderRadius:2},children:[(0,a.jsx)(E,{messagesCount:o.length,onNewChat:()=>{},isConnected:!0,projectName:t.name}),(0,a.jsx)(n.A,{sx:{flexGrow:1,overflow:"auto",display:"flex",flexDirection:"column",mt:2},children:(0,a.jsx)(ec,{messages:o,loading:!1,projectName:t.name,logoUrl:t.logoUrl})}),(0,a.jsx)(m.A,{open:!!r,autoHideDuration:6e3,onClose:()=>i(""),children:(0,a.jsx)(f.A,{onClose:()=>i(""),severity:"error",children:r})})]}),(0,a.jsx)(b.P.div,{variants:ek,initial:"initial",animate:"animate",style:{display:"flex",justifyContent:"center",width:"100%"},children:(0,a.jsx)(h.A,{sx:{maxWidth:"md",width:"100%",borderRadius:6,backgroundColor:"white",boxShadow:"0 8px 24px -8px rgba(0, 0, 0, 0.15)",border:"1px solid rgba(255, 255, 255, 0.2)"},children:(0,a.jsx)(_,{onSendMessage:()=>{},onToggleSpeechRecognition:()=>{},isConnected:!0,isListening:!1,isPreview:!0})})})]})})})}function eS(e){let{open:t,onClose:r,project:i=null,onSave:o,onDelete:c}=e,d=!i,[u,p]=(0,l.useState)({name:"",logoUrl:s.v.defaults.logoUrl,mainColor:s.v.defaults.color,backgroundColor:s.v.defaults.backgroundColor,backgroundImage:s.v.defaults.image,backgroundType:"image",speechProvider:s.v.defaults.speechProvider}),[g,h]=(0,l.useState)({}),[m,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{i?(p({name:i.name,logoUrl:i.logoUrl||s.v.defaults.logoUrl,mainColor:i.mainColor||s.v.defaults.color,backgroundColor:i.backgroundColor||s.v.defaults.backgroundColor,backgroundImage:i.backgroundImage||s.v.defaults.image,backgroundType:"image",speechProvider:i.speechProvider||s.v.defaults.speechProvider}),s.v.availableColors.includes(i.mainColor||s.v.defaults.color)||p(e=>({...e,mainColor:s.v.defaults.color}))):p({name:"",logoUrl:s.v.defaults.logoUrl,mainColor:s.v.defaults.color,backgroundColor:s.v.defaults.backgroundColor,backgroundImage:s.v.defaults.image,backgroundType:"image",speechProvider:s.v.defaults.speechProvider}),h({})},[i,t]);let b=e=>{let{name:t,value:r}=e.target;p(e=>({...e,[t]:r})),g[t]&&h(e=>({...e,[t]:void 0}))},j=e=>{p(t=>({...t,mainColor:e}))},y=e=>{p(t=>({...t,backgroundImage:e,backgroundType:"image"}))},v=()=>{let e={};return u.name.trim()||(e.name="Name is required"),u.logoUrl&&!w(u.logoUrl)&&(e.logoUrl="Please enter a valid URL"),h(e),0===Object.keys(e).length},w=e=>{try{return new URL(e),!0}catch(e){return!1}},A=()=>{r(),f(!1)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.A,{sx:{position:"fixed",top:0,left:0,width:"100%",height:"100%",display:t?"flex":"none",alignItems:"stretch",justifyContent:"center",zIndex:9999,backgroundColor:"rgba(0, 0, 0, 0.8)",p:6,backdropFilter:"blur(14px)"},onClick:A,children:(0,a.jsxs)(n.A,{sx:{display:"flex",gap:2,width:"100%",height:"100%",justifyContent:"center",alignItems:"stretch"},onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)(n.A,{sx:{backgroundColor:"white",borderRadius:2,boxShadow:24,width:"400px",flexShrink:0,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,a.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:3,borderBottom:"1px solid rgba(0, 0, 0, 0.12)"},children:[(0,a.jsx)(x.A,{variant:"h6",children:d?"Create New Project":"Edit Project"}),(0,a.jsx)(D.A,{onClick:A,size:"small",children:(0,a.jsx)(eg.A,{})})]}),(0,a.jsx)(n.A,{sx:{p:3,flex:1,overflow:"auto"},children:(0,a.jsxs)(F.A,{spacing:2,children:[(0,a.jsx)(U.A,{label:"Project Name",name:"name",size:"small",value:u.name,onChange:b,fullWidth:!0,error:!!g.name,helperText:g.name}),(0,a.jsx)(U.A,{label:"Logo URL (optional)",name:"logoUrl",size:"small",value:u.logoUrl,onChange:b,fullWidth:!0,error:!!g.logoUrl,helperText:g.logoUrl}),(0,a.jsxs)(n.A,{children:[(0,a.jsx)(x.A,{variant:"subtitle2",sx:{mb:2},children:"Main Color"}),(0,a.jsx)(n.A,{sx:{display:"grid",gridTemplateColumns:"repeat(6, 1fr)",gap:1,mb:3},children:s.v.availableColors.map(e=>(0,a.jsx)(n.A,{onClick:()=>j(e),sx:{width:40,height:40,bgcolor:e,borderRadius:1,cursor:"pointer",border:"1px solid rgba(0, 0, 0, 0.1)",transform:u.mainColor===e?"scale(1.2)":"scale(1)",transition:"transform 0.15s ease-out","&:hover":{transform:u.mainColor===e?"scale(1.2)":"scale(1.05)"}}},e))})]}),(0,a.jsxs)(n.A,{children:[(0,a.jsx)(x.A,{variant:"subtitle2",sx:{mb:2},children:"Background"}),(0,a.jsx)(n.A,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:s.v.availableImages.map((e,t)=>(0,a.jsx)(n.A,{onClick:()=>y(e),sx:{width:50,height:50,borderRadius:1,cursor:"pointer",backgroundImage:"url(".concat(e,")"),backgroundSize:"cover",backgroundPosition:"center",transform:"image"===u.backgroundType&&u.backgroundImage===e?"scale(1.2)":"scale(1)",transition:"transform 0.15s ease-out","&:hover":{transform:"image"===u.backgroundType&&u.backgroundImage===e?"scale(1.2)":"scale(1.05)"}}},t))})]}),(0,a.jsxs)(ef.A,{component:"fieldset",children:[(0,a.jsx)(eb.A,{component:"legend",children:(0,a.jsx)(x.A,{variant:"subtitle2",children:"Speech Service"})}),(0,a.jsxs)(ej.A,{name:"speechProvider",value:u.speechProvider,onChange:b,row:!0,children:[(0,a.jsx)(ey.A,{value:"browser",control:(0,a.jsx)(ev.A,{size:"small"}),label:"Browser"}),(0,a.jsx)(ey.A,{value:"oracle",control:(0,a.jsx)(ev.A,{size:"small"}),label:"Oracle"})]})]})]})}),(0,a.jsxs)(n.A,{sx:{display:"flex",justifyContent:"space-between",p:3,borderTop:"1px solid rgba(0, 0, 0, 0.12)"},children:[!d&&(null==i?void 0:i.id)!=="default"&&(0,a.jsx)(Q.A,{variant:"text",color:"error",startIcon:(0,a.jsx)(eh.A,{}),onClick:()=>f(!0),children:"Delete"}),(0,a.jsx)(n.A,{sx:{flexGrow:1}}),(0,a.jsxs)(F.A,{direction:"row",spacing:1,children:[(0,a.jsx)(Q.A,{variant:"outlined",onClick:A,children:"Cancel"}),(0,a.jsx)(Q.A,{variant:"contained",startIcon:(0,a.jsx)(em.A,{}),onClick:()=>{v()&&(o(u),r())},children:d?"Create":"Save changes"})]})]})]}),(0,a.jsx)(n.A,{sx:{borderRadius:2,flex:1,display:"flex",flexDirection:"column",minWidth:0},children:(0,a.jsx)(eC,{projectData:u})})]})}),(0,a.jsxs)(B.A,{open:m,onClose:()=>f(!1),children:[(0,a.jsx)(H.A,{children:"Delete Project?"}),(0,a.jsx)(G.A,{children:(0,a.jsx)(ew.A,{children:"Are you sure you want to delete this project? This action cannot be undone."})}),(0,a.jsxs)(q.A,{children:[(0,a.jsx)(Q.A,{onClick:()=>f(!1),children:"Cancel"}),(0,a.jsx)(Q.A,{onClick:()=>{c(i.id),f(!1),r()},color:"error",children:"Delete"})]})]})]})}function eP(){let e=(0,o.useSearchParams)().get("projectId"),t=(0,o.useRouter)(),{switchProject:r,createProject:n,updateProject:i,deleteProject:s}=(0,k.B)(),[c,d]=(0,l.useState)(!1),[u,p]=(0,l.useState)(null);(0,l.useEffect)(()=>{e&&r(e)},[e,r]);let x=e=>{s(e),d(!1),p(null)};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(I,{children:(0,a.jsx)(ex,{onAddProject:()=>{p(null),d(!0)},onEditProject:e=>{p(e),d(!0)},onDeleteProject:x})}),(0,a.jsx)(eS,{open:c,onClose:()=>{d(!1),p(null)},project:u,onSave:e=>{if(u)i(u.id,e),d(!1),p(null);else{let a=n(e);a?(r(a),t.push("/?projectId=".concat(a)),d(!1),p(null)):alert("Maximum number of projects (8) reached")}},onDelete:x})]})}function eI(){return(0,a.jsx)(n.A,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:(0,a.jsx)(i.A,{})})}function eR(){return(0,a.jsx)(l.Suspense,{fallback:(0,a.jsx)(eI,{}),children:(0,a.jsx)(eP,{})})}},2129:(e,t,r)=>{"use strict";r.d(t,{v:()=>a});let a={availableColors:["#2E2E2E","#2979FF","#34C759","#FF9500","#FF375F","#AF52DE","#8E8E93","#FFD60A"],availableImages:["/background.png","/backgrounds/radial-sky-blue.jpg","/backgrounds/sonoma.jpg","/backgrounds/imac-blue.jpg","/backgrounds/imac-green.jpg","/backgrounds/imac-orange.jpg","/backgrounds/imac-pink.jpg","/backgrounds/imac-purple.jpg","/backgrounds/imac-silver.jpg","/backgrounds/imac-yellow.jpg"],defaults:{color:"#3a3632",image:"/background.png",backgroundColor:"#F5F5F5",name:"OCI Generative AI Agents",logoUrl:"",speechProvider:"browser"}}},3030:(e,t,r)=>{Promise.resolve().then(r.bind(r,313))},3525:(e,t,r)=>{"use strict";r.d(t,{B:()=>l,ProjectProvider:()=>s});var a=r(5155),n=r(2115),i=r(2129);let o=(0,n.createContext)(null),l=()=>{let e=(0,n.useContext)(o);if(!e)throw Error("useProject must be used within a ProjectProvider");return e},s=e=>{let{children:t}=e,[r,l]=(0,n.useState)([]),[s,c]=(0,n.useState)("");return(0,n.useEffect)(()=>{{let e=localStorage.getItem("chatProjects"),t=localStorage.getItem("currentProjectId");if(e)l(JSON.parse(e).map(e=>({...e,mainColor:e.mainColor||e.backgroundColor||i.v.defaults.color,backgroundColor:e.backgroundColor||i.v.defaults.backgroundColor,speechProvider:e.speechProvider||i.v.defaults.speechProvider}))),c(t||"default");else{let e={id:"default",name:i.v.defaults.name,logoUrl:i.v.defaults.logoUrl,mainColor:i.v.defaults.color,backgroundColor:i.v.defaults.backgroundColor,backgroundImage:i.v.defaults.image,speechProvider:i.v.defaults.speechProvider};l([e]),c("default"),localStorage.setItem("chatProjects",JSON.stringify([e])),localStorage.setItem("currentProjectId","default")}}},[]),(0,n.useEffect)(()=>{r.length>0&&localStorage.setItem("chatProjects",JSON.stringify(r))},[r]),(0,n.useEffect)(()=>{s&&localStorage.setItem("currentProjectId",s)},[s]),(0,a.jsx)(o.Provider,{value:{projects:r,createProject:e=>{if(r.length>=8)return console.warn("Maximum number of projects (8) reached"),null;let t={id:Date.now().toString(),name:i.v.defaults.name,logoUrl:i.v.defaults.logoUrl,mainColor:i.v.defaults.color,backgroundColor:i.v.defaults.backgroundColor,speechProvider:i.v.defaults.speechProvider,...e};return l(e=>[...e,t]),t.id},updateProject:(e,t)=>{l(r=>r.map(r=>r.id===e?{...r,...t}:r))},deleteProject:e=>"default"!==e&&(l(t=>t.filter(t=>t.id!==e)),s===e&&c("default"),!0),getCurrentProject:()=>r.find(e=>e.id===s)||r[0]||{id:"default",name:i.v.defaults.name,logoUrl:i.v.defaults.logoUrl,mainColor:i.v.defaults.color,backgroundColor:i.v.defaults.backgroundColor,speechProvider:i.v.defaults.speechProvider},switchProject:e=>{s!==e&&c(e)},currentProjectId:s},children:t})}}},e=>{var t=t=>e(e.s=t);e.O(0,[494,427,441,684,358],()=>t(3030)),_N_E=e.O()}]);